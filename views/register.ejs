<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Corona Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- End layout styles -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="shortcut icon" href="/images/favicon.png" />

    <!-- End layout styles -->
  </head>
  <body style="background-color:#191c24">
    <div class="container-scroller">
      <!-- partial:partials/_sidebar.html -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
          <li class="nav-item profile">
            <button style="color: white;" class="btn-block navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
              <span class="mdi mdi-menu"></span>
            </button>
            <div class="profile-desc">
              <div class="profile-pic">
                <div class="count-indicator ">
                  <img class="img-xs rounded-circle " style="height: 100%; width: 100%;" src="/images/faces/face15.png" alt="">
                </div>
              </div>
              <a href="#" id="profile-dropdown" data-toggle="dropdown"><i class="mdi mdi-dots-vertical"></i></a>
              <div class="dropdown-menu dropdown-menu-right sidebar-dropdown preview-list" aria-labelledby="profile-dropdown">
                <a href="#" class="dropdown-item preview-item">
                  <div style="height: 20px;"><p class="dropdown-menu" id="logout" style="background-color: rgba(51, 50, 50, 0.072);" id="logout" href="#"><form class="rounded" action="/logout" method="post"><button class="nav-link" style="margin-top: -15%;">Log Out</button></form></p></div>
                </a>
              </div>
            </div>
          </li>
          <li class="nav-item nav-category">
            <span class="nav-link">Navigation</span>
          </li>
          <li class="nav-item menu-items" id="home">
            <a class="nav-link" href="#">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Home</span>
            </a>
          </li>
          <li class="nav-item menu-items" id="dashboard">
            <a class="nav-link" href="#">
              <span class="menu-icon">
                <i class="mdi mdi-speedometer"></i>
              </span>
              <span class="menu-title">Dashboard</span>
            </a>
          </li>
          <li class="nav-item menu-items" id="survey">
            <a class="nav-link" href="#">
              <span class="menu-icon">
                <i class="mdi mdi-playlist-play"></i>
              </span>
              <span class="menu-title">Survey</span>
            </a>
          </li>
          <li class="nav-item menu-items" id="report">
            <a class="nav-link" href="#">
              <span class="menu-icon">
                <i class="mdi mdi-table-large"></i>
              </span>
              <span class="menu-title">Report</span>
            </a>
          </li>
          <li class="nav-item menu-items">
            <a class="nav-link" data-toggle="collapse" href="#auth" aria-expanded="false" aria-controls="auth">
              <span class="menu-icon">
                <i class="mdi mdi-security"></i>
              </span>
              <span class="menu-title">Account</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="auth">
              <ul class="nav flex-column sub-menu">
                <li class="acc-text"><a class="nav-link" href="#" id="login"> Login </a></li>
                <li class="acc-text"><a class="nav-link" href="#" id="register"> Admin </a></li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
      <% if (loggedIn == 'true') { 
        %>

      <% if (edit == 'false') 
                { %>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:partials/_navbar.html -->
      <!-- partial -->
      <div class="main-panel ">
              <div class="content-wrapper">
                
                <div class="row">
                  <div class="col-md-4 grid-margin stretch-card">
                    <div class="card" style="background-color: darksalmon;">
                      <div class="card-body" style="background-color: darksalmon;" ><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
                        
                
                      
                          <h3 class="card-title text-left mb-3" style="color: black;">Create Admin User</h3>
                          <form action="/register" method="post">
                            <div class="form-group">
                              <label>Username</label>
                              <input autofocus required type="text" class="form-control p_input" id="username" name="username">
                            </div>
                            <div class="form-group">
                              <label>Password</label>
                              <input required type="password" class="form-control p_input" id="password" name="password">
                            </div>
                            <div class="text-center">
                              <button type="submit" class="btn btn-primary btn-block enter-btn">Create</button>
                            </div>                  
                           </form>
                        </div>
                      </div>
                      
                  </div>
                
                
                  <div class="col-md-8 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                
                
                        <div class="table-responsive">
                          <table class="table table-striped">
                            <thead>
                              <tr>
                                <th> User ID</th>
                                <th> Username </th>
                                <th> Password </th>
                                <th> Edit </th>
                                <th> Delete </th>
                              </tr>
                            </thead>
                            <tbody>
                              <% for (let iCount = 0; iCount < myUsers.length; iCount++) { %>
                                  <tr>
                                      <td><%= myUsers[iCount].userId %></td>
                                      <td><%= myUsers[iCount].username %></td>
                                      <td><%= myUsers[iCount].password %></td>
                                      <td style="text-align: center;"> 
                                          <form action="/edit/<%= myUsers[iCount].userId %>" method="get">
                                              <button type="submit">Edit</button>
                                          </form>
                                      </td>
                                      <td style="text-align: center;">
                                          <form action="/deleteUser/<%= myUsers[iCount].userId %>" method="POST">
                                              <button type="submit">Delete</button>
                                          </form>
                                      </td>
                                  </tr>
                                  <% } %>
                          </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
        <!-- content-wrapper ends -->
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <% } 
    
<!-- -------------------------------------------------------------------------------------------------------------------------- -->
<!-- -------------------------------------------------------------------------------------------------------------------------- -->
<!-- -------------------------------------------------------------------------------------------------------------------------- -->
 
    else 
  {%>
      
  
    <div class="container-fluid">
      <!-- partial:partials/_navbar.html -->
      <!-- partial -->
      <div class="main-panel">        
              <div class="content-wrapper custom-background-2">
                
                <div class="row">
                  <div class="col-md-4 grid-margin stretch-card">
                    <div class="card" style="background-color: darksalmon;">
                      <div class="card-body" style="background-color: darksalmon;" ><div class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand"><div class=""></div></div><div class="chartjs-size-monitor-shrink"><div class=""></div></div></div>
                        
                
                      
                          <h3 class="card-title text-left mb-3" style="color: black;">Edit User</h3>
                          <form action="/edit" method="post">
                            <div class="form-group">
                              <input type="hidden" name="userId" id="userId" value="<%=myUsers[0].userId %>">
                              <label>Username</label>
                              <input autofocus required type="text" class="form-control p_input" id="username" name="username" value="<%=myUsers[0].username %>">
                            </div>
                            <div class="form-group">
                              <label>Password</label>
                              <input required type="text" class="form-control p_input" id="password" name="password" value="<%=myUsers[0].password %>">
                            </div>
                            <div class="text-center">
                              <button type="submit" class="btn btn-primary btn-block enter-btn">Update</button>
                            </div>                  
                           </form>
                        </div>
                      </div>
                      
                  </div>
                
                
                  <div class="col-md-8 grid-margin stretch-card">
                    <div class="card">
                      <div class="card-body">
                
                
                        <div class="table-responsive">
                          <table class="table table-striped">
                            <thead>
                              <tr>
                                <th> User ID</th>
                                <th> Username </th>
                                <th> Password </th>
                                <th> Edit </th>
                                <th> Delete </th>
                              </tr>
                            </thead>
                            <tbody>
                              <% for (let iCount = 0; iCount < myUsers.length; iCount++) { %>
                                  <tr>
                                      <td><%= myUsers[iCount].userId %></td>
                                      <td><%= myUsers[iCount].username %></td>
                                      <td><%= myUsers[iCount].password %></td>
                                      <td></td>
                                      <td></td>
                                  </tr>
                                  <% } %>
                          </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
        <!-- content-wrapper ends -->
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <% } %>
<!-- ----------------------------------------------------------------------------------------------- -->
  <% } 
              
  else 
  {%>
      <h1>Please login to see this page</h1>
      <form action="/login" method="get">
          <button type="submit">Go to Login</button>
      </form>
  <% }
%>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="/js/off-canvas.js"></script> 
    <script src="/js/hoverable-collapse.js"></script> 
    <script src="/js/misc.js"></script> 
    <script src="/js/settings.js"></script> 
    <script src="/js/todolist.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <!-- endinject -->
    <!-- inject script to trigger gets from navbar -->
    <script src="/js/triggerGets.js"></script>
  </body>
</html>